{% extends 'healthcare/base.html' %}
{% block title %}Update Appointment{% endblock %}
{% block content %}
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<link rel="stylesheet" href="/resources/demos/style.css">
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

<h1>Update Appointment</h1>
<form method="post">
    {% csrf_token %}
    {{form.as_p}}
    <input type="submit" value="Update Schedule">
</form> 

{{ filtered_schedule|json_script:"filtered_schedule" }}
<script>
    const filteredSchedule = JSON.parse(document.getElementById('filtered_schedule').textContent);
    console.log(filteredSchedule)

    var minDate = new Date();
    minDate.setDate(minDate.getDate() + 1);
    $( function() {
        $( "#appointment_date" ).datepicker({
        numberOfMonths:1, 
        changeYear: true,
        changeMonth: true,
        dateFormat: 'yy-mm-dd',
        minDate: minDate,
        beforeShowDay: function(date) {

            return [filteredSchedule.indexOf(date.getDay()) > -1]
        },
        });
    } );
</script>
{% endblock %}